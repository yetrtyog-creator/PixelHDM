# =============================================================================
# PixelHDM-RPEA-DinoV3 - Environment Configuration
# =============================================================================
# All paths are RELATIVE to project root (except data_config.yaml)
# =============================================================================

# -----------------------------------------------------------------------------
# Virtual Environment
# -----------------------------------------------------------------------------
environment:
  name: "pixelHDM-env"
  venv_path: ".venv/pixelHDM-env"   # Relative to project root
  python_version: "3.12"

# -----------------------------------------------------------------------------
# PyTorch Configuration
# -----------------------------------------------------------------------------
pytorch:
  version: "2.8.0"
  cuda_version: "cu128"
  index_url: "https://download.pytorch.org/whl/cu128"
  # Full spec: torch==2.8.0+cu128

# -----------------------------------------------------------------------------
# Flash Attention Configuration
# -----------------------------------------------------------------------------
flash_attention:
  version: "2.8.3"
  wheel_url: "https://huggingface.co/Wildminder/AI-windows-whl/resolve/main/flash_attn-2.8.3+cu128torch2.8.0cxx11abiTRUE-cp312-cp312-win_amd64.whl"
  optional: true  # Installation can continue if this fails

# -----------------------------------------------------------------------------
# DINOv3 Encoder (Requires Manual Download)
# -----------------------------------------------------------------------------
dinov3:
  local_path: "Dinov3/dinov3_vitb16_pretrain_lvd1689m-73cec8be.pth"  # Relative
  requires_license: true
  license_note: |
    DINOv3 requires Meta AI license agreement.
    Please download manually from official source:
    https://github.com/facebookresearch/dinov2

    Place the weights file at:
    Dinov3/dinov3_vitb16_pretrain_lvd1689m-73cec8be.pth

# -----------------------------------------------------------------------------
# Text Encoder
# -----------------------------------------------------------------------------
text_encoder:
  name: "Qwen/Qwen3-0.6B"
  auto_download: true  # Will download from HuggingFace on first use

# -----------------------------------------------------------------------------
# Project Paths (All Relative)
# -----------------------------------------------------------------------------
paths:
  scripts: "scripts"
  configs: "configs"
  src: "src"
  tests: "tests"
  checkpoints: "checkpoints"
  logs: "logs"
  outputs: "outputs"
  publicdocs: "publicdocs"

# -----------------------------------------------------------------------------
# Scripts Reference
# -----------------------------------------------------------------------------
scripts:
  setup: "scripts/setup_env.bat"
  activate: "scripts/activate.bat"
  train: "scripts/train.bat"
  inference: "scripts/inference.bat"
  verify: "scripts/verify_env.bat"
  run_tests: "scripts/run_tests.bat"

# -----------------------------------------------------------------------------
# Version Pinning (for requirements.txt reference)
# -----------------------------------------------------------------------------
dependencies:
  # Core (versions from current environment)
  transformers: ">=4.57.0"
  accelerate: ">=1.12.0"
  safetensors: ">=0.7.0"

  # Image
  pillow: ">=12.0.0"

  # Data
  numpy: ">=2.4.0"
  einops: ">=0.8.0"

  # Utilities
  tqdm: ">=4.67.0"
  pyyaml: ">=6.0.0"

  # Logging
  tensorboard: ">=2.20.0"

  # Development
  pytest: ">=9.0.0"
  pytest-cov: ">=7.0.0"

  # Optional
  bitsandbytes: ">=0.49.0"  # 8-bit optimizer
  triton: ">=3.4.0"         # Windows: triton-windows

# =============================================================================
# Last Updated: 2026-01-08
# =============================================================================
